<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="~{navigation-bar :: navbar (~{::body}, ~{::title})}">
<head>
    <meta charset="UTF-8">
    <title>My Races</title>
</head>
<body>

<div class="container my-2">
    <h5>My Races</h5>
    <br/>
    <div th:each="race: ${races}">
        <div class="card">
            <div class="card-header">
                <div class="row">
                    <div class="col-11">
                        <h4 class="card-title" th:text="${race.title}"></h4>
                    </div>
                    <div class="col-1" style="align-content: end">
                        <a th:href="@{/races/{id}/update (id=${race.id})}">
                            <img src="/resources/icons/edit.svg" width="20" alt="UpdateButton"></a>
                        <a type="button" data-bs-toggle="modal"
                           th:attr="data-bs-target='#deleteModal'+${race.id}">
                            <img src="/resources/icons/delete.svg" width="20" alt="deleteButton"></a>

                        <!-- Modal -->
                        <div class="modal fade"
                             th:attr="id='deleteModal'+${race.id}, aria-labelledby='deleteModalLabel' + ${race.id}"
                             tabindex="-1" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" th:attr="id='deleteModalLabel'+${race.id}">
                                            Are you sure you want to delete this race?</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <p th:text="'Title: ' + ${race.title}"></p>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                                            Cancel
                                        </button>
                                        <a type="button" class="btn btn-danger"
                                           th:href="@{/races/{id}/delete (id=${race.id})}">Delete</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card-body">
                <div class="row">
                    <img class="col-sm-1" src="/resources/icons/location.svg" alt="Location" height="20px">
                    <h6 class="col-3" style="left: 30px" th:text="${race.location}"></h6>
                </div>
                <div class="row">
                    <img class="col-1" src="/resources/icons/date2.svg" alt="Date" height="20px">
                    <h6 class="col-2" style="left: 30px" th:text="${race.date}"></h6>
                </div>

                <p class="card-text" th:text="${race.description}"></p>
                <a th:href="@{/races/{id} (id=${race.id})}">See the full race post</a>
            </div>
        </div>
        <br/>
    </div>
</div>

</body>
</html>